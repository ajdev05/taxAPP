<!DOCTYPE html>

<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>


    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="viewport"
          content="width=device-width">
    <link rel="icon" type="image/x-icon" href="" />
    <title>Tax Calculator</title>


    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Bungee+Spice&family=DM+Sans&family=Gabarito&family=Kdam+Thmor+Pro&family=Nabla&family=Sen:wght@700&family=Share+Tech+Mono&family=Ubuntu:wght@300&display=swap" rel="stylesheet">    <link rel="stylesheet" href="https://unpkg.com/flowbite@1.5.3/dist/flowbite.min.css" />
    <script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>

    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@2.8.2/dist/alpine.min.js" defer></script>


    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Bungee+Spice&family=Coda+Caption&family=DM+Sans&family=Kdam+Thmor+Pro&family=Nabla&family=Share+Tech+Mono&family=Ubuntu:wght@300&display=swap" rel="stylesheet">

</head>
<body class="bg-gray-900">
<nav class="bg-gray-800">
    <div class="mx-auto max-w-7xl px-2 sm:px-6 lg:px-8">
        <div class="relative flex h-16 items-center justify-between">
            <div class="absolute inset-y-0 left-0 flex items-center sm:hidden">
                <button type="button" class="relative inline-flex items-center justify-center rounded-md p-2 text-gray-400 hover:bg-gray-700 hover:text-white focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white" aria-controls="mobile-menu" aria-expanded="false">
                    <span class="absolute -inset-0.5"></span>

                    <svg class="block h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                    </svg>

                    <svg class="hidden h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div class="flex flex-1 items-center justify-center sm:items-stretch sm:justify-start">

                <div class="hidden sm:ml-6 sm:block">
                    <div class="flex space-x-4">
                        <h1 class="text-white text-2xl font-bold font-serif tracking-wide px-2 py-1">
                            <span class="text-red-700">UNCLE SAM'S</span>
                            <span class="">TAX</span>
                            <span class="text-blue-500">CALCULATOR</span>
                        </h1>
                        <a href="/" class="text-gray-300 hover:bg-gray-700 hover:text-white block rounded-md px-3 py-2 text-base font-medium">Tax Calculator</a>
                        <a href="/api-docs" class="text-gray-300 hover:bg-gray-700 hover:text-white block rounded-md px-3 py-2 text-base font-medium">API DOCS</a>
                    </div>
                </div>
            </div>

        </div>
    </div>
    </div>

    <div class="sm:hidden" id="mobile-menu">
        <div class="flex space-x-4">
            <h1 class="text-white text-2xl font-bold font-serif tracking-wide px-2 py-1">
                <span class="text-red-700">UNCLE SAM'S</span>
                <span class="">TAX</span>
                <span class="text-blue-500">CALCULATOR</span>
            </h1>
            <a href="/" class="text-gray-300 hover:bg-gray-700 hover:text-white block rounded-md px-3 py-2 text-base font-medium">Tax Calculator</a>
            <a href="/api-docs" class="text-gray-300 hover:bg-gray-700 hover:text-white block rounded-md px-3 py-2 text-base font-medium">API DOCS</a>
        </div>
    </div>
</nav>

<div class="absolute inset-0">
    <div class="animated-circle"><img src="https://thedeepdish.org/wp-content/uploads/ezgif.com-optimize.gif" alt="" srcset=""></div>
    <div class="animated-circle"><img src="https://thedeepdish.org/wp-content/uploads/ezgif.com-optimize.gif" alt="" srcset=""></div>
    <div class="animated-circle"><img src="https://thedeepdish.org/wp-content/uploads/ezgif.com-optimize.gif" alt="" srcset=""></div>
    <div class="animated-circle"><img src="https://thedeepdish.org/wp-content/uploads/ezgif.com-optimize.gif" alt="" srcset=""></div>



</div>
<div>
    <div>
        <center>
            <img class="p-2 m-2" src="https://amickamookandamic.com/wp-content/uploads/2022/04/Tax-534x267.jpg" alt="">
        </center>

        <style>
            @keyframes moveUp {
              0%, 100% {
                transform: translateY(0);
              }
              50% {
                transform: translateY(-40px);
              }
            }

            .animated-circle {
              width: 60px;
              height: 60px;
              opacity: 40%;
              border-radius: 50%;
              position: absolute;
              animation: moveUp 5s infinite;
              z-index: 0;
            }
            .absolute.inset-0 {
            position: relative;
            }

            .animated-circle:nth-child(1) {
              top: 20%;
              left: 20%;
            }

            .animated-circle:nth-child(2) {
              top: 50%;
              left: 40%;
            }

            .animated-circle:nth-child(3) {
              top: 30%;
              right: 30%;
            }

            .animated-circle:nth-child(4) {
              top: 70%;
              right: 10%;
            }


        </style>
    </div>
    <script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.js" defer></script>

    <form method="post" action="/submitForm" enctype="multipart/form-data" role="form" class="max-w-xl mx-auto mt-8 p-8 bg-gray-800 text-white rounded-lg shadow-md" id="taxForm">

        <input type="hidden" name="token" value="" />



        <div class="mb-6 flex flex-wrap">


            <div class="w-full ">
                <label for="inputSubject" class="text-sm font-bold">Enter Taxable Income</label>
                <input type="number" name="subject" id="inputSubject" value="" class="form-input mt-2 p-3 w-full rounded-md bg-gray-700 text-white focus:outline-none focus:border-blue-500" required />
            </div>
        </div>

        <div class="mb-6">
            <div class="flex flex-wrap">
                <div class="w-full  pr-0 md:pr-2">
                    <label for="inputDepartment" class="text-sm font-bold"   >Filing Status</label>
                    <select name="deptid" id="inputDepartment" class="form-select mt-2 p-3 w-full rounded-md bg-gray-700 text-white focus:outline-none focus:border-blue-500" required >
                        <option value="0" selected="selected">Single</option>
                        <option value="1">Married jointly or qualifying widow(er)</option>
                        <option value="2">Married separately</option>
                        <option value="3">Head of household</option>

                    </select>
                </div>


            </div>
        </div>



        <div id="autoAnswerSuggestions" class="hidden"></div>

        <div class="text-center mb-6">
            <!-- Additional content can be added here -->
        </div>


        <div class="flex justify-center">
            <button type="button" id="openTicketSubmit" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-full focus:outline-none focus:shadow-outline-blue transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:shadow-outline-indigo" onclick="submitFormData()">Submit</button>
            <a href="/" class="ml-4 text-gray-400 hover:text-gray-500 font-bold py-3 px-6 rounded-full focus:outline-none focus:shadow-outline-gray">Cancel</a>
        </div>

    </form>
   <center>
    <div id="myModal" class="modal" style="display: none; z-index: 100;">
        <div class="modal-content p-6 rounded-md shadow-md text-center w-60" style="background-color: rgb(55, 65, 81); width: 40%;">
           <center><img class="h-40 w-40 " src="https://cdn.discordapp.com/attachments/1107995701419454565/1205552976123400302/transparent-american-flag-64f143f5b33d44.png?ex=65d8c9b3&is=65c654b3&hm=02552a443ea28aab707bf014eab191a758425f31cdfb502f2737a70dc6d0466e&" alt="" srcset=""></center>
            <p class="text-white font-bold mt-4">This is what you owe to Uncle Sam.</p>
            <p class="mb-4 text-white m-1 p-1" id="modalMessage"></p>
            <button id="closeModal" class="bg-red-500 text-black px-4 py-2 rounded-md hover:bg-red-600 focus:outline-none focus:ring focus:border-blue-500 transition duration-300 ease-in-out">Close</button>

        </div>
    </div>
   </center>

    <style>
        .modal {
            display: flex;
            position: fixed;
            top: 0%;
            bottom: 0%;
            left: 0%;
            right: 0%;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }

        #closeModal {
            cursor: pointer;
            font-size: 20px;
        }
    </style>

    <script>
        document.getElementById('taxForm').addEventListener('submit', function (e) {
            e.preventDefault();
            console.log('Form submitted');
            submitFormData();
});


        function submitFormData() {
            const formData = new FormData(document.getElementById('taxForm'));
              console.log('Submitting form data...');

            // Send form data using Fetch API
            fetch('/submitForm', {
                method: 'POST',
                body: formData,
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.json();
            })
            .then(data => {
                console.log('Server response:', data);

                // Display the modal
                showModal(data.calculatedTax);
            })
            .catch(error => {
                console.error('Error:', error);
            });
        }

        function showModal(calculatedTax) {
            // Set the modal message
            document.getElementById('modalMessage').innerText = `Calculated Tax: $ ${calculatedTax}`;
            console.log('Showing modal with calculated tax:', calculatedTax);

            // Display the modal
            const modal = document.querySelector('.modal');
            modal.style.display = 'block';

            // Close the modal on button click
            document.getElementById('closeModal').addEventListener('click', function () {
                modal.style.display = 'none';
                document.getElementById('taxForm').reset();

            });
        }
    </script>



</div>
</body>
</html>
